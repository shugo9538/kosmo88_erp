<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 네임스페이스 : 작업할 클래서 -->
<!-- id : 어디서쓰는거지? (메소드??) 클래스에 종속적이다 parameterType : 뭔가 받아오는 데이터? 보통 Dto 
	형으로 설정. (insert등에??) resultType : dto -->
<!-- <typeAliases> 내부에 <typeAlias alias="" type=""으로 앨리어싱> 여기에 작성한 내용을 다른 
	태그의 parameterType에서 사용? 대부분 생략한다고 한다 -->
<mapper
	namespace="com.kosmo88.logistics_erp.wms.dao.WarehouseDao">

	<insert id="insert"
		parameterType="com.kosmo88.logistics_erp.wms.dto.WarehouseDto">
		INSERT INTO WAREHOUSE
		(ID, NAME, ADDRESS)
		VALUES(
		#{id}, #{name}, #{address}
		)
	</insert>

	<!-- warehouse -->
	<select id="selectList"
		resultType="com.kosmo88.logistics_erp.wms.dto.V_warehouseDto">
		<!-- select * from warehouse; -->
		SELECT WAREHOUSE_ID, WAREHOUSE_NAME
			, count(*) SECTION_COUNT, SUM(CAPACITY) CAPACITY_SUM, SUM(LOADED) LOADED_SUM
		FROM V_WAREHOUSE
		GROUP BY WAREHOUSE_ID, WAREHOUSE_NAME
	</select>

	<select id="selectOne"
	parameterType="int"
		resultType="com.kosmo88.logistics_erp.wms.dto.WarehouseDto">
		SELECT *
		FROM WAREHOUSE
		WHERE ID=#{id}
<!-- 		WHERE ID=1 -->
	</select>

	<select id="selectMaxId" resultType="int">
		SELECT MAX(ID) FROM
		WAREHOUSE
	</select>

	<!-- rackList -->
<!-- 	<select id="selectSection" -->
<!-- 		resultType="com.kosmo88.logistics_erp.wms.dto.SectionDto"> -->
<!-- 	<![CDATA[ -->
<!-- 	SELECT s.NAME name, s.CAPACITY , i.NAME item_name, loaded -->
<!-- 	  FROM  -->
<!--     SECTION s JOIN ITEM i -->
<!--     ON s.item_id = i.id -->
<!--     AND s.item_id != 0; -->
<!-- 	]]> -->
<!-- 	</select> -->

	<!-- 입고시 insert 처리한다 -->
	<!-- <insert id="insert"> -->
	<!-- insert into rack values( -->
	<!-- '#{id}', '#{warehouse_id}', '#{section}' -->
	<!-- , '#{section_number}', '#{capacity}', '#{loaded}' -->
	<!-- ); -->
	<!-- </insert> -->

	<!-- 4. 거래처 정보수정(where => 사업자등록번호) -->
	<update id="update" parameterType="int">
		UPDATE WAREHOUSE
		SET
		NAME=#{name}
		, ADDRESS=#{address}
		, REGISTER_DATE=#{register_date}
	</update>
	<!-- 5. 거래체 목록 삭제(where => 사업자등록번호) -->
	<delete id="delete" parameterType="int">
		DELETE FROM WAREHOUSE
		WHERE
		REGISTER_NUM=#{register_num}
	</delete>

</mapper>    